var app=angular.module("yourCall",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"/partials/singlequestion.html"}).when("/ask",{templateUrl:"/partials/newquestion.html",controller:"NewQuestionCtrl"}).when("/:question_url",{templateUrl:"partials/singlequestion.html",controller:"SingleQuestionCtrl"}).when("/oops/notfound",{templateUrl:"/partials/notfound.html"}),e.html5Mode(!0)}]);var app=angular.module("yourCall",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"/partials/singlequestion.html"}).when("/ask",{templateUrl:"/partials/newquestion.html",controller:"NewQuestionCtrl"}).when("/:question_url",{templateUrl:"partials/singlequestion.html",controller:"SingleQuestionCtrl"}).when("/oops/notfound",{templateUrl:"/partials/notfound.html"}),e.html5Mode(!0)}]);var app=angular.module("yourCall",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"/partials/singlequestion.html"}).when("/ask",{templateUrl:"/partials/newquestion.html",controller:"NewQuestionCtrl"}).when("/:question_url",{templateUrl:"partials/singlequestion.html",controller:"SingleQuestionCtrl"}).when("/oops/notfound",{templateUrl:"/partials/notfound.html"}),e.html5Mode(!0)}]),app.controller("AllCtrl",["$scope","$http",function(t,e){e.get("/api/questions").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("MainCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){t.page=n,t.questions=[],e.get("/api/random").success(function(e){t.questions.push(e[0]),t.question=t.questions[0],"/"===o.path()&&o.path("/"+t.question.url)}).error(function(t){console.log("Error: "+t)})}]),app.controller("NewQuestionCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){n.setTitle("Ask a question"),t.submitted=!1,t.errorMessage="";var r=37,s=50;t.formData={},t.formData.isPrivate=!1,t.createQuestion=function(){t.formData.title&&t.formData.option_1&&t.formData.option_2?t.formData.title.length>r?t.errorMessage="Please try to shorten your question.":t.formData.option_1.length>s||t.formData.option_2.length>s?t.errorMessage="Please try to shorten your options.":(t.submitted=!0,t.errorMessage="",e.post("/api/questions",t.formData).success(function(e){t.formData={},t.newQuestion=e,t.questions.push(e),o.path("/"+e.url)}).error(function(t){console.log("Error: "+t)})):t.errorMessage="Please fill in all fields."}}]),app.controller("ReportedCtrl",["$scope","$http",function(t,e){e.get("/api/reported").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("SingleQuestionCtrl",["$scope","$routeParams","$http","$location","$window","pageFactory","questionService",function(t,e,o,n,r,s,i){function u(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null}function l(){var e="",o=u("votes");if(u("own_q"))for(var n=u("own_q").split("|"),r=0;r<n.length;r++)e+=":"+n[r].split(":")[0];s.setTitle(t.question.title),o&&o.indexOf(t.question.url)>-1&&(t.question.hasVoted=!0),e.indexOf(t.question._id)>-1&&(t.ownedQuestion=!0),t.totalVotes=t.question.option_1_votes+t.question.option_2_votes}i.getRandomQuestion().success(function(e){t.nextQuestion=e[0],console.log(e)}),t.ownedQuestion=!1,e.question_url?(t.question=t.questions.filter(function(t){return t.url===e.question_url})[0],t.question?l():o.get("/api/questions/"+e.question_url).success(function(e){t.questions.unshift(e),t.question=e,l()}).error(function(t){console.log("Error: "+t),n.path("/oops/notfound")})):l(),t.vote=function(e,n){var r=t.questions.indexOf(e);t.question=t.questions[r],t.question.hasVoted||o.put("/api/vote/"+e.url+"/"+n).success(function(e){"true"===e.success&&(t.questions[r]["option_"+n+"_votes"]+=1,t.questions[r].selection=n,t.questions[r].hasVoted=!0,l())}).error(function(t){console.log("Error: "+t)})},t.deleteMessage="Delete",t.deleteQuestion=function(e){var r=window.confirm("Are you sure?");if(r){t.deleteMessage="Deleting...";var s="";if(u("own_q"))for(var i=u("own_q").split("|"),l=0;l<i.length;l++)e===i[l].split(":")[0]&&(s=i[l].split(":")[1]);o.delete("/api/delete/"+e+"?verify="+s).success(function(){o.get("/api/random").success(function(t){n.path("/"+t[0].url)}).error(function(t){console.log("Error: "+t)})}).error(function(t){console.log("Error: "+t)})}},t.reportMessage="Report",t.reportQuestion=function(e){t.reportMessage="Flagged for review",o.put("/api/report/"+e).success(function(){})},t.$on("$viewContentLoaded",function(){r.ga("send","pageview",{page:n.path()})})}]),app.directive("selfRefresh",["$location","$route",function(t,e){return function(o,n){n.bind("click",function(){n[0]&&n[0].href&&n[0].href===t.absUrl()&&e.reload()})}}]),app.directive("slideGraph",["$timeout",function(t){return{restrict:"A",scope:{voted:"@"},link:function(e,o){e.$watch("voted",function(e){function n(){t(function(){r=i.textContent.replace("%","")+"vh",s=u.textContent.replace("%","")+"vh",l.style.height=r,a.style.height=s},100),t(function(){i.classList.add("show-percentage"),u.classList.add("show-percentage")},1500),t(function(){c.classList.add("shake-rotate")},5e3)}var r,s,i=document.getElementById("result-1"),u=document.getElementById("result-2"),l=document.querySelector(".option-1"),a=document.querySelector(".option-2"),c=document.getElementById("next-button");e?n():o.on("click",function(){e&&n()})})}}}]),app.factory("pageFactory",function(){var t="YourCall.io";return{title:function(){return t},setTitle:function(e){t="Your Call: "+e}}}),angular.module("yourCall").factory("questionService",["$http",function(t){var e={};return e.getRandomQuestion=function(){return t.get("/api/random")},e.getAllQuestions=function(){},e.getReportedQuestions=function(){},e.deleteQuestion=function(){},e.createQuestion=function(){},e}]);var app=angular.module("yourCall",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"/partials/singlequestion.html"}).when("/ask",{templateUrl:"/partials/newquestion.html",controller:"NewQuestionCtrl"}).when("/:question_url",{templateUrl:"partials/singlequestion.html",controller:"SingleQuestionCtrl"}).when("/oops/notfound",{templateUrl:"/partials/notfound.html"}),e.html5Mode(!0)}]),app.controller("AllCtrl",["$scope","$http",function(t,e){e.get("/api/questions").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("MainCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){t.page=n,t.questions=[],e.get("/api/random").success(function(e){t.questions.push(e[0]),t.question=t.questions[0],"/"===o.path()&&o.path("/"+t.question.url)}).error(function(t){console.log("Error: "+t)})}]),app.controller("NewQuestionCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){n.setTitle("Ask a question"),t.submitted=!1,t.errorMessage="";var r=37,s=50;t.formData={},t.formData.isPrivate=!1,t.createQuestion=function(){t.formData.title&&t.formData.option_1&&t.formData.option_2?t.formData.title.length>r?t.errorMessage="Please try to shorten your question.":t.formData.option_1.length>s||t.formData.option_2.length>s?t.errorMessage="Please try to shorten your options.":(t.submitted=!0,t.errorMessage="",e.post("/api/questions",t.formData).success(function(e){t.formData={},t.newQuestion=e,t.questions.push(e),o.path("/"+e.url)}).error(function(t){console.log("Error: "+t)})):t.errorMessage="Please fill in all fields."}}]),app.controller("ReportedCtrl",["$scope","$http",function(t,e){e.get("/api/reported").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("SingleQuestionCtrl",["$scope","$routeParams","$http","$location","$window","pageFactory","questionService",function(t,e,o,n,r,s,i){function u(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null}function l(){var e="",o=u("votes");if(u("own_q"))for(var n=u("own_q").split("|"),r=0;r<n.length;r++)e+=":"+n[r].split(":")[0];s.setTitle(t.question.title),o&&o.indexOf(t.question.url)>-1&&(t.question.hasVoted=!0),e.indexOf(t.question._id)>-1&&(t.ownedQuestion=!0),t.totalVotes=t.question.option_1_votes+t.question.option_2_votes}i.getRandomQuestion().success(function(e){t.nextQuestion=e[0],console.log(e)}),t.ownedQuestion=!1,e.question_url?(t.question=t.questions.filter(function(t){return t.url===e.question_url})[0],t.question?l():o.get("/api/questions/"+e.question_url).success(function(e){t.questions.unshift(e),t.question=e,l()}).error(function(t){console.log("Error: "+t),n.path("/oops/notfound")})):l(),t.vote=function(e,n){var r=t.questions.indexOf(e);t.question=t.questions[r],t.question.hasVoted||o.put("/api/vote/"+e.url+"/"+n).success(function(e){"true"===e.success&&(t.questions[r]["option_"+n+"_votes"]+=1,t.questions[r].selection=n,t.questions[r].hasVoted=!0,l())}).error(function(t){console.log("Error: "+t)})},t.deleteMessage="Delete",t.deleteQuestion=function(e){var r=window.confirm("Are you sure?");if(r){t.deleteMessage="Deleting...";var s="";if(u("own_q"))for(var i=u("own_q").split("|"),l=0;l<i.length;l++)e===i[l].split(":")[0]&&(s=i[l].split(":")[1]);o.delete("/api/delete/"+e+"?verify="+s).success(function(){o.get("/api/random").success(function(t){n.path("/"+t[0].url)}).error(function(t){console.log("Error: "+t)})}).error(function(t){console.log("Error: "+t)})}},t.reportMessage="Report",t.reportQuestion=function(e){t.reportMessage="Flagged for review",o.put("/api/report/"+e).success(function(){})},t.$on("$viewContentLoaded",function(){r.ga("send","pageview",{page:n.path()})})}]),app.directive("selfRefresh",["$location","$route",function(t,e){return function(o,n){n.bind("click",function(){n[0]&&n[0].href&&n[0].href===t.absUrl()&&e.reload()})}}]),app.directive("slideGraph",["$timeout",function(t){return{restrict:"A",scope:{voted:"@"},link:function(e,o){e.$watch("voted",function(e){function n(){t(function(){r=i.textContent.replace("%","")+"vh",s=u.textContent.replace("%","")+"vh",l.style.height=r,a.style.height=s},100),t(function(){i.classList.add("show-percentage"),u.classList.add("show-percentage")},1500),t(function(){c.classList.add("shake-rotate")},5e3)}var r,s,i=document.getElementById("result-1"),u=document.getElementById("result-2"),l=document.querySelector(".option-1"),a=document.querySelector(".option-2"),c=document.getElementById("next-button");e?n():o.on("click",function(){e&&n()})})}}}]),app.factory("pageFactory",function(){var t="YourCall.io";return{title:function(){return t},setTitle:function(e){t="Your Call: "+e}}}),angular.module("yourCall").factory("questionService",["$http",function(t){var e={};return e.getRandomQuestion=function(){return t.get("/api/random")},e.getAllQuestions=function(){},e.getReportedQuestions=function(){},e.deleteQuestion=function(){},e.createQuestion=function(){},e}]),app.controller("AllCtrl",["$scope","$http",function(t,e){e.get("/api/questions").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("MainCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){t.page=n,t.questions=[],e.get("/api/random").success(function(e){t.questions.push(e[0]),t.question=t.questions[0],"/"===o.path()&&o.path("/"+t.question.url)}).error(function(t){console.log("Error: "+t)})}]),app.controller("NewQuestionCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){n.setTitle("Ask a question"),t.submitted=!1,t.errorMessage="";var r=37,s=50;t.formData={},t.formData.isPrivate=!1,t.createQuestion=function(){t.formData.title&&t.formData.option_1&&t.formData.option_2?t.formData.title.length>r?t.errorMessage="Please try to shorten your question.":t.formData.option_1.length>s||t.formData.option_2.length>s?t.errorMessage="Please try to shorten your options.":(t.submitted=!0,t.errorMessage="",e.post("/api/questions",t.formData).success(function(e){t.formData={},t.newQuestion=e,t.questions.push(e),o.path("/"+e.url)}).error(function(t){console.log("Error: "+t)})):t.errorMessage="Please fill in all fields."}}]),app.controller("ReportedCtrl",["$scope","$http",function(t,e){e.get("/api/reported").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("SingleQuestionCtrl",["$scope","$routeParams","$http","$location","$window","pageFactory","questionService",function(t,e,o,n,r,s,i){function u(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null}function l(){var e="",o=u("votes");if(u("own_q"))for(var n=u("own_q").split("|"),r=0;r<n.length;r++)e+=":"+n[r].split(":")[0];s.setTitle(t.question.title),o&&o.indexOf(t.question.url)>-1&&(t.question.hasVoted=!0),e.indexOf(t.question._id)>-1&&(t.ownedQuestion=!0),t.totalVotes=t.question.option_1_votes+t.question.option_2_votes}i.getRandomQuestion().success(function(e){t.nextQuestion=e[0],console.log(e)}),t.ownedQuestion=!1,e.question_url?(t.question=t.questions.filter(function(t){return t.url===e.question_url})[0],t.question?l():o.get("/api/questions/"+e.question_url).success(function(e){t.questions.unshift(e),t.question=e,l()}).error(function(t){console.log("Error: "+t),n.path("/oops/notfound")})):l(),t.vote=function(e,n){var r=t.questions.indexOf(e);t.question=t.questions[r],t.question.hasVoted||o.put("/api/vote/"+e.url+"/"+n).success(function(e){"true"===e.success&&(t.questions[r]["option_"+n+"_votes"]+=1,t.questions[r].selection=n,t.questions[r].hasVoted=!0,l())}).error(function(t){console.log("Error: "+t)})},t.deleteMessage="Delete",t.deleteQuestion=function(e){var r=window.confirm("Are you sure?");if(r){t.deleteMessage="Deleting...";var s="";if(u("own_q"))for(var i=u("own_q").split("|"),l=0;l<i.length;l++)e===i[l].split(":")[0]&&(s=i[l].split(":")[1]);o.delete("/api/delete/"+e+"?verify="+s).success(function(){o.get("/api/random").success(function(t){n.path("/"+t[0].url)}).error(function(t){console.log("Error: "+t)})}).error(function(t){console.log("Error: "+t)})}},t.reportMessage="Report",t.reportQuestion=function(e){t.reportMessage="Flagged for review",o.put("/api/report/"+e).success(function(){})},t.$on("$viewContentLoaded",function(){r.ga("send","pageview",{page:n.path()})})}]),app.directive("selfRefresh",["$location","$route",function(t,e){return function(o,n){n.bind("click",function(){n[0]&&n[0].href&&n[0].href===t.absUrl()&&e.reload()})}}]),app.directive("slideGraph",["$timeout",function(t){return{restrict:"A",scope:{voted:"@"},link:function(e,o){e.$watch("voted",function(e){function n(){t(function(){r=i.textContent.replace("%","")+"vh",s=u.textContent.replace("%","")+"vh",l.style.height=r,a.style.height=s},100),t(function(){i.classList.add("show-percentage"),u.classList.add("show-percentage")},1500),t(function(){c.classList.add("shake-rotate")},5e3)}var r,s,i=document.getElementById("result-1"),u=document.getElementById("result-2"),l=document.querySelector(".option-1"),a=document.querySelector(".option-2"),c=document.getElementById("next-button");e?n():o.on("click",function(){e&&n()})})}}}]),app.factory("pageFactory",function(){var t="YourCall.io";return{title:function(){return t},setTitle:function(e){t="Your Call: "+e}}}),angular.module("yourCall").factory("questionService",["$http",function(t){var e={};return e.getRandomQuestion=function(){return t.get("/api/random")},e.getAllQuestions=function(){},e.getReportedQuestions=function(){},e.deleteQuestion=function(){},e.createQuestion=function(){},e}]);var app=angular.module("yourCall",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"/partials/singlequestion.html"}).when("/ask",{templateUrl:"/partials/newquestion.html",controller:"NewQuestionCtrl"}).when("/:question_url",{templateUrl:"partials/singlequestion.html",controller:"SingleQuestionCtrl"}).when("/oops/notfound",{templateUrl:"/partials/notfound.html"}),e.html5Mode(!0)}]);var app=angular.module("yourCall",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"/partials/singlequestion.html"}).when("/ask",{templateUrl:"/partials/newquestion.html",controller:"NewQuestionCtrl"}).when("/:question_url",{templateUrl:"partials/singlequestion.html",controller:"SingleQuestionCtrl"}).when("/oops/notfound",{templateUrl:"/partials/notfound.html"}),e.html5Mode(!0)}]),app.controller("AllCtrl",["$scope","$http",function(t,e){e.get("/api/questions").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("MainCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){t.page=n,t.questions=[],e.get("/api/random").success(function(e){t.questions.push(e[0]),t.question=t.questions[0],"/"===o.path()&&o.path("/"+t.question.url)}).error(function(t){console.log("Error: "+t)})}]),app.controller("NewQuestionCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){n.setTitle("Ask a question"),t.submitted=!1,t.errorMessage="";var r=37,s=50;t.formData={},t.formData.isPrivate=!1,t.createQuestion=function(){t.formData.title&&t.formData.option_1&&t.formData.option_2?t.formData.title.length>r?t.errorMessage="Please try to shorten your question.":t.formData.option_1.length>s||t.formData.option_2.length>s?t.errorMessage="Please try to shorten your options.":(t.submitted=!0,t.errorMessage="",e.post("/api/questions",t.formData).success(function(e){t.formData={},t.newQuestion=e,t.questions.push(e),o.path("/"+e.url)}).error(function(t){console.log("Error: "+t)})):t.errorMessage="Please fill in all fields."}}]),app.controller("ReportedCtrl",["$scope","$http",function(t,e){e.get("/api/reported").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("SingleQuestionCtrl",["$scope","$routeParams","$http","$location","$window","pageFactory","questionService",function(t,e,o,n,r,s,i){function u(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null}function l(){var e="",o=u("votes");if(u("own_q"))for(var n=u("own_q").split("|"),r=0;r<n.length;r++)e+=":"+n[r].split(":")[0];s.setTitle(t.question.title),o&&o.indexOf(t.question.url)>-1&&(t.question.hasVoted=!0),e.indexOf(t.question._id)>-1&&(t.ownedQuestion=!0),t.totalVotes=t.question.option_1_votes+t.question.option_2_votes}i.getRandomQuestion().success(function(e){t.nextQuestion=e[0],console.log(e)}),t.ownedQuestion=!1,e.question_url?(t.question=t.questions.filter(function(t){return t.url===e.question_url})[0],t.question?l():o.get("/api/questions/"+e.question_url).success(function(e){t.questions.unshift(e),t.question=e,l()}).error(function(t){console.log("Error: "+t),n.path("/oops/notfound")})):l(),t.vote=function(e,n){var r=t.questions.indexOf(e);t.question=t.questions[r],t.question.hasVoted||o.put("/api/vote/"+e.url+"/"+n).success(function(e){"true"===e.success&&(t.questions[r]["option_"+n+"_votes"]+=1,t.questions[r].selection=n,t.questions[r].hasVoted=!0,l())}).error(function(t){console.log("Error: "+t)})},t.deleteMessage="Delete",t.deleteQuestion=function(e){var r=window.confirm("Are you sure?");if(r){t.deleteMessage="Deleting...";var s="";if(u("own_q"))for(var i=u("own_q").split("|"),l=0;l<i.length;l++)e===i[l].split(":")[0]&&(s=i[l].split(":")[1]);o.delete("/api/delete/"+e+"?verify="+s).success(function(){o.get("/api/random").success(function(t){n.path("/"+t[0].url)}).error(function(t){console.log("Error: "+t)})}).error(function(t){console.log("Error: "+t)})}},t.reportMessage="Report",t.reportQuestion=function(e){t.reportMessage="Flagged for review",o.put("/api/report/"+e).success(function(){})},t.$on("$viewContentLoaded",function(){r.ga("send","pageview",{page:n.path()})})}]),app.directive("selfRefresh",["$location","$route",function(t,e){return function(o,n){n.bind("click",function(){n[0]&&n[0].href&&n[0].href===t.absUrl()&&e.reload()})}}]),app.directive("slideGraph",["$timeout",function(t){return{restrict:"A",scope:{voted:"@"},link:function(e,o){e.$watch("voted",function(e){function n(){t(function(){r=i.textContent.replace("%","")+"vh",s=u.textContent.replace("%","")+"vh",l.style.height=r,a.style.height=s},100),t(function(){i.classList.add("show-percentage"),u.classList.add("show-percentage")},1500),t(function(){c.classList.add("shake-rotate")},5e3)}var r,s,i=document.getElementById("result-1"),u=document.getElementById("result-2"),l=document.querySelector(".option-1"),a=document.querySelector(".option-2"),c=document.getElementById("next-button");e?n():o.on("click",function(){e&&n()})})}}}]),app.factory("pageFactory",function(){var t="YourCall.io";return{title:function(){return t},setTitle:function(e){t="Your Call: "+e}}}),angular.module("yourCall").factory("questionService",["$http",function(t){var e={};return e.getRandomQuestion=function(){return t.get("/api/random")},e.getAllQuestions=function(){},e.getReportedQuestions=function(){},e.deleteQuestion=function(){},e.createQuestion=function(){},e}]);var app=angular.module("yourCall",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"/partials/singlequestion.html"}).when("/ask",{templateUrl:"/partials/newquestion.html",controller:"NewQuestionCtrl"}).when("/:question_url",{templateUrl:"partials/singlequestion.html",controller:"SingleQuestionCtrl"}).when("/oops/notfound",{templateUrl:"/partials/notfound.html"}),e.html5Mode(!0)}]),app.controller("AllCtrl",["$scope","$http",function(t,e){e.get("/api/questions").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("MainCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){t.page=n,t.questions=[],e.get("/api/random").success(function(e){t.questions.push(e[0]),t.question=t.questions[0],"/"===o.path()&&o.path("/"+t.question.url)}).error(function(t){console.log("Error: "+t)})}]),app.controller("NewQuestionCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){n.setTitle("Ask a question"),t.submitted=!1,t.errorMessage="";var r=37,s=50;t.formData={},t.formData.isPrivate=!1,t.createQuestion=function(){t.formData.title&&t.formData.option_1&&t.formData.option_2?t.formData.title.length>r?t.errorMessage="Please try to shorten your question.":t.formData.option_1.length>s||t.formData.option_2.length>s?t.errorMessage="Please try to shorten your options.":(t.submitted=!0,t.errorMessage="",e.post("/api/questions",t.formData).success(function(e){t.formData={},t.newQuestion=e,t.questions.push(e),o.path("/"+e.url)}).error(function(t){console.log("Error: "+t)})):t.errorMessage="Please fill in all fields."}}]),app.controller("ReportedCtrl",["$scope","$http",function(t,e){e.get("/api/reported").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("SingleQuestionCtrl",["$scope","$routeParams","$http","$location","$window","pageFactory","questionService",function(t,e,o,n,r,s,i){function u(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null}function l(){var e="",o=u("votes");if(u("own_q"))for(var n=u("own_q").split("|"),r=0;r<n.length;r++)e+=":"+n[r].split(":")[0];s.setTitle(t.question.title),o&&o.indexOf(t.question.url)>-1&&(t.question.hasVoted=!0),e.indexOf(t.question._id)>-1&&(t.ownedQuestion=!0),t.totalVotes=t.question.option_1_votes+t.question.option_2_votes}i.getRandomQuestion().success(function(e){t.nextQuestion=e[0],console.log(e)}),t.ownedQuestion=!1,e.question_url?(t.question=t.questions.filter(function(t){return t.url===e.question_url})[0],t.question?l():o.get("/api/questions/"+e.question_url).success(function(e){t.questions.unshift(e),t.question=e,l()}).error(function(t){console.log("Error: "+t),n.path("/oops/notfound")})):l(),t.vote=function(e,n){var r=t.questions.indexOf(e);t.question=t.questions[r],t.question.hasVoted||o.put("/api/vote/"+e.url+"/"+n).success(function(e){"true"===e.success&&(t.questions[r]["option_"+n+"_votes"]+=1,t.questions[r].selection=n,t.questions[r].hasVoted=!0,l())}).error(function(t){console.log("Error: "+t)})},t.deleteMessage="Delete",t.deleteQuestion=function(e){var r=window.confirm("Are you sure?");if(r){t.deleteMessage="Deleting...";var s="";if(u("own_q"))for(var i=u("own_q").split("|"),l=0;l<i.length;l++)e===i[l].split(":")[0]&&(s=i[l].split(":")[1]);o.delete("/api/delete/"+e+"?verify="+s).success(function(){o.get("/api/random").success(function(t){n.path("/"+t[0].url)}).error(function(t){console.log("Error: "+t)})}).error(function(t){console.log("Error: "+t)})}},t.reportMessage="Report",t.reportQuestion=function(e){t.reportMessage="Flagged for review",o.put("/api/report/"+e).success(function(){})},t.$on("$viewContentLoaded",function(){r.ga("send","pageview",{page:n.path()})})}]),app.directive("selfRefresh",["$location","$route",function(t,e){return function(o,n){n.bind("click",function(){n[0]&&n[0].href&&n[0].href===t.absUrl()&&e.reload()})}}]),app.directive("slideGraph",["$timeout",function(t){return{restrict:"A",scope:{voted:"@"},link:function(e,o){e.$watch("voted",function(e){function n(){t(function(){r=i.textContent.replace("%","")+"vh",s=u.textContent.replace("%","")+"vh",l.style.height=r,a.style.height=s},100),t(function(){i.classList.add("show-percentage"),u.classList.add("show-percentage")},1500),t(function(){c.classList.add("shake-rotate")},5e3)}var r,s,i=document.getElementById("result-1"),u=document.getElementById("result-2"),l=document.querySelector(".option-1"),a=document.querySelector(".option-2"),c=document.getElementById("next-button");e?n():o.on("click",function(){e&&n()})})}}}]),app.factory("pageFactory",function(){var t="YourCall.io";return{title:function(){return t},setTitle:function(e){t="Your Call: "+e}}}),angular.module("yourCall").factory("questionService",["$http",function(t){var e={};return e.getRandomQuestion=function(){return t.get("/api/random")},e.getAllQuestions=function(){},e.getReportedQuestions=function(){},e.deleteQuestion=function(){},e.createQuestion=function(){},e}]),app.controller("AllCtrl",["$scope","$http",function(t,e){e.get("/api/questions").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("MainCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){t.page=n,t.questions=[],e.get("/api/random").success(function(e){t.questions.push(e[0]),t.question=t.questions[0],"/"===o.path()&&o.path("/"+t.question.url)}).error(function(t){console.log("Error: "+t)})}]),app.controller("NewQuestionCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){n.setTitle("Ask a question"),t.submitted=!1,t.errorMessage="";var r=37,s=50;t.formData={},t.formData.isPrivate=!1,t.createQuestion=function(){t.formData.title&&t.formData.option_1&&t.formData.option_2?t.formData.title.length>r?t.errorMessage="Please try to shorten your question.":t.formData.option_1.length>s||t.formData.option_2.length>s?t.errorMessage="Please try to shorten your options.":(t.submitted=!0,t.errorMessage="",e.post("/api/questions",t.formData).success(function(e){t.formData={},t.newQuestion=e,t.questions.push(e),o.path("/"+e.url)}).error(function(t){console.log("Error: "+t)})):t.errorMessage="Please fill in all fields."}}]),app.controller("ReportedCtrl",["$scope","$http",function(t,e){e.get("/api/reported").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("SingleQuestionCtrl",["$scope","$routeParams","$http","$location","$window","pageFactory","questionService",function(t,e,o,n,r,s,i){function u(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null}function l(){var e="",o=u("votes");if(u("own_q"))for(var n=u("own_q").split("|"),r=0;r<n.length;r++)e+=":"+n[r].split(":")[0];s.setTitle(t.question.title),o&&o.indexOf(t.question.url)>-1&&(t.question.hasVoted=!0),e.indexOf(t.question._id)>-1&&(t.ownedQuestion=!0),t.totalVotes=t.question.option_1_votes+t.question.option_2_votes}i.getRandomQuestion().success(function(e){t.nextQuestion=e[0],console.log(e)}),t.ownedQuestion=!1,e.question_url?(t.question=t.questions.filter(function(t){return t.url===e.question_url})[0],t.question?l():o.get("/api/questions/"+e.question_url).success(function(e){t.questions.unshift(e),t.question=e,l()}).error(function(t){console.log("Error: "+t),n.path("/oops/notfound")})):l(),t.vote=function(e,n){var r=t.questions.indexOf(e);t.question=t.questions[r],t.question.hasVoted||o.put("/api/vote/"+e.url+"/"+n).success(function(e){"true"===e.success&&(t.questions[r]["option_"+n+"_votes"]+=1,t.questions[r].selection=n,t.questions[r].hasVoted=!0,l())}).error(function(t){console.log("Error: "+t)})},t.deleteMessage="Delete",t.deleteQuestion=function(e){var r=window.confirm("Are you sure?");if(r){t.deleteMessage="Deleting...";var s="";if(u("own_q"))for(var i=u("own_q").split("|"),l=0;l<i.length;l++)e===i[l].split(":")[0]&&(s=i[l].split(":")[1]);o.delete("/api/delete/"+e+"?verify="+s).success(function(){o.get("/api/random").success(function(t){n.path("/"+t[0].url)}).error(function(t){console.log("Error: "+t)})}).error(function(t){console.log("Error: "+t)})}},t.reportMessage="Report",t.reportQuestion=function(e){t.reportMessage="Flagged for review",o.put("/api/report/"+e).success(function(){})},t.$on("$viewContentLoaded",function(){r.ga("send","pageview",{page:n.path()})})}]),app.directive("selfRefresh",["$location","$route",function(t,e){return function(o,n){n.bind("click",function(){n[0]&&n[0].href&&n[0].href===t.absUrl()&&e.reload()})}}]),app.directive("slideGraph",["$timeout",function(t){return{restrict:"A",scope:{voted:"@"},link:function(e,o){e.$watch("voted",function(e){function n(){t(function(){r=i.textContent.replace("%","")+"vh",s=u.textContent.replace("%","")+"vh",l.style.height=r,a.style.height=s},100),t(function(){i.classList.add("show-percentage"),u.classList.add("show-percentage")},1500),t(function(){c.classList.add("shake-rotate")},5e3)}var r,s,i=document.getElementById("result-1"),u=document.getElementById("result-2"),l=document.querySelector(".option-1"),a=document.querySelector(".option-2"),c=document.getElementById("next-button");e?n():o.on("click",function(){e&&n()})})}}}]),app.factory("pageFactory",function(){var t="YourCall.io";return{title:function(){return t},setTitle:function(e){t="Your Call: "+e}}}),angular.module("yourCall").factory("questionService",["$http",function(t){var e={};return e.getRandomQuestion=function(){return t.get("/api/random")},e.getAllQuestions=function(){},e.getReportedQuestions=function(){},e.deleteQuestion=function(){},e.createQuestion=function(){},e}]);var app=angular.module("yourCall",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"/partials/singlequestion.html"}).when("/ask",{templateUrl:"/partials/newquestion.html",controller:"NewQuestionCtrl"}).when("/:question_url",{templateUrl:"partials/singlequestion.html",controller:"SingleQuestionCtrl"}).when("/oops/notfound",{templateUrl:"/partials/notfound.html"}),e.html5Mode(!0)}]),app.controller("AllCtrl",["$scope","$http",function(t,e){e.get("/api/questions").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("MainCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){t.page=n,t.questions=[],e.get("/api/random").success(function(e){t.questions.push(e[0]),t.question=t.questions[0],"/"===o.path()&&o.path("/"+t.question.url)
}).error(function(t){console.log("Error: "+t)})}]),app.controller("NewQuestionCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){n.setTitle("Ask a question"),t.submitted=!1,t.errorMessage="";var r=37,s=50;t.formData={},t.formData.isPrivate=!1,t.createQuestion=function(){t.formData.title&&t.formData.option_1&&t.formData.option_2?t.formData.title.length>r?t.errorMessage="Please try to shorten your question.":t.formData.option_1.length>s||t.formData.option_2.length>s?t.errorMessage="Please try to shorten your options.":(t.submitted=!0,t.errorMessage="",e.post("/api/questions",t.formData).success(function(e){t.formData={},t.newQuestion=e,t.questions.push(e),o.path("/"+e.url)}).error(function(t){console.log("Error: "+t)})):t.errorMessage="Please fill in all fields."}}]),app.controller("ReportedCtrl",["$scope","$http",function(t,e){e.get("/api/reported").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("SingleQuestionCtrl",["$scope","$routeParams","$http","$location","$window","pageFactory","questionService",function(t,e,o,n,r,s,i){function u(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null}function l(){var e="",o=u("votes");if(u("own_q"))for(var n=u("own_q").split("|"),r=0;r<n.length;r++)e+=":"+n[r].split(":")[0];s.setTitle(t.question.title),o&&o.indexOf(t.question.url)>-1&&(t.question.hasVoted=!0),e.indexOf(t.question._id)>-1&&(t.ownedQuestion=!0),t.totalVotes=t.question.option_1_votes+t.question.option_2_votes}i.getRandomQuestion().success(function(e){t.nextQuestion=e[0],console.log(e)}),t.ownedQuestion=!1,e.question_url?(t.question=t.questions.filter(function(t){return t.url===e.question_url})[0],t.question?l():o.get("/api/questions/"+e.question_url).success(function(e){t.questions.unshift(e),t.question=e,l()}).error(function(t){console.log("Error: "+t),n.path("/oops/notfound")})):l(),t.vote=function(e,n){var r=t.questions.indexOf(e);t.question=t.questions[r],t.question.hasVoted||o.put("/api/vote/"+e.url+"/"+n).success(function(e){"true"===e.success&&(t.questions[r]["option_"+n+"_votes"]+=1,t.questions[r].selection=n,t.questions[r].hasVoted=!0,l())}).error(function(t){console.log("Error: "+t)})},t.deleteMessage="Delete",t.deleteQuestion=function(e){var r=window.confirm("Are you sure?");if(r){t.deleteMessage="Deleting...";var s="";if(u("own_q"))for(var i=u("own_q").split("|"),l=0;l<i.length;l++)e===i[l].split(":")[0]&&(s=i[l].split(":")[1]);o.delete("/api/delete/"+e+"?verify="+s).success(function(){o.get("/api/random").success(function(t){n.path("/"+t[0].url)}).error(function(t){console.log("Error: "+t)})}).error(function(t){console.log("Error: "+t)})}},t.reportMessage="Report",t.reportQuestion=function(e){t.reportMessage="Flagged for review",o.put("/api/report/"+e).success(function(){})},t.$on("$viewContentLoaded",function(){r.ga("send","pageview",{page:n.path()})})}]),app.directive("selfRefresh",["$location","$route",function(t,e){return function(o,n){n.bind("click",function(){n[0]&&n[0].href&&n[0].href===t.absUrl()&&e.reload()})}}]),app.directive("slideGraph",["$timeout",function(t){return{restrict:"A",scope:{voted:"@"},link:function(e,o){e.$watch("voted",function(e){function n(){t(function(){r=i.textContent.replace("%","")+"vh",s=u.textContent.replace("%","")+"vh",l.style.height=r,a.style.height=s},100),t(function(){i.classList.add("show-percentage"),u.classList.add("show-percentage")},1500),t(function(){c.classList.add("shake-rotate")},5e3)}var r,s,i=document.getElementById("result-1"),u=document.getElementById("result-2"),l=document.querySelector(".option-1"),a=document.querySelector(".option-2"),c=document.getElementById("next-button");e?n():o.on("click",function(){e&&n()})})}}}]),app.factory("pageFactory",function(){var t="YourCall.io";return{title:function(){return t},setTitle:function(e){t="Your Call: "+e}}}),angular.module("yourCall").factory("questionService",["$http",function(t){var e={};return e.getRandomQuestion=function(){return t.get("/api/random")},e.getAllQuestions=function(){},e.getReportedQuestions=function(){},e.deleteQuestion=function(){},e.createQuestion=function(){},e}]);var app=angular.module("yourCall",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"/partials/singlequestion.html"}).when("/ask",{templateUrl:"/partials/newquestion.html",controller:"NewQuestionCtrl"}).when("/:question_url",{templateUrl:"partials/singlequestion.html",controller:"SingleQuestionCtrl"}).when("/oops/notfound",{templateUrl:"/partials/notfound.html"}),e.html5Mode(!0)}]),app.controller("AllCtrl",["$scope","$http",function(t,e){e.get("/api/questions").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("MainCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){t.page=n,t.questions=[],e.get("/api/random").success(function(e){t.questions.push(e[0]),t.question=t.questions[0],"/"===o.path()&&o.path("/"+t.question.url)}).error(function(t){console.log("Error: "+t)})}]),app.controller("NewQuestionCtrl",["$scope","$http","$location","pageFactory",function(t,e,o,n){n.setTitle("Ask a question"),t.submitted=!1,t.errorMessage="";var r=37,s=50;t.formData={},t.formData.isPrivate=!1,t.createQuestion=function(){t.formData.title&&t.formData.option_1&&t.formData.option_2?t.formData.title.length>r?t.errorMessage="Please try to shorten your question.":t.formData.option_1.length>s||t.formData.option_2.length>s?t.errorMessage="Please try to shorten your options.":(t.submitted=!0,t.errorMessage="",e.post("/api/questions",t.formData).success(function(e){t.formData={},t.newQuestion=e,t.questions.push(e),o.path("/"+e.url)}).error(function(t){console.log("Error: "+t)})):t.errorMessage="Please fill in all fields."}}]),app.controller("ReportedCtrl",["$scope","$http",function(t,e){e.get("/api/reported").success(function(e){t.questions=e}).error(function(t){console.log("Error: "+t)})}]),app.controller("SingleQuestionCtrl",["$scope","$routeParams","$http","$location","$window","pageFactory","questionService",function(t,e,o,n,r,s,i){function u(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null}function l(){var e="",o=u("votes");if(u("own_q"))for(var n=u("own_q").split("|"),r=0;r<n.length;r++)e+=":"+n[r].split(":")[0];s.setTitle(t.question.title),o&&o.indexOf(t.question.url)>-1&&(t.question.hasVoted=!0),e.indexOf(t.question._id)>-1&&(t.ownedQuestion=!0),t.totalVotes=t.question.option_1_votes+t.question.option_2_votes}i.getRandomQuestion().success(function(e){t.nextQuestion=e[0],console.log(e)}),t.ownedQuestion=!1,e.question_url?(t.question=t.questions.filter(function(t){return t.url===e.question_url})[0],t.question?l():o.get("/api/questions/"+e.question_url).success(function(e){t.questions.unshift(e),t.question=e,l()}).error(function(t){console.log("Error: "+t),n.path("/oops/notfound")})):l(),t.vote=function(e,n){var r=t.questions.indexOf(e);t.question=t.questions[r],t.question.hasVoted||o.put("/api/vote/"+e.url+"/"+n).success(function(e){"true"===e.success&&(t.questions[r]["option_"+n+"_votes"]+=1,t.questions[r].selection=n,t.questions[r].hasVoted=!0,l())}).error(function(t){console.log("Error: "+t)})},t.deleteMessage="Delete",t.deleteQuestion=function(e){var r=window.confirm("Are you sure?");if(r){t.deleteMessage="Deleting...";var s="";if(u("own_q"))for(var i=u("own_q").split("|"),l=0;l<i.length;l++)e===i[l].split(":")[0]&&(s=i[l].split(":")[1]);o.delete("/api/delete/"+e+"?verify="+s).success(function(){o.get("/api/random").success(function(t){n.path("/"+t[0].url)}).error(function(t){console.log("Error: "+t)})}).error(function(t){console.log("Error: "+t)})}},t.reportMessage="Report",t.reportQuestion=function(e){t.reportMessage="Flagged for review",o.put("/api/report/"+e).success(function(){})},t.$on("$viewContentLoaded",function(){r.ga("send","pageview",{page:n.path()})})}]),app.directive("selfRefresh",["$location","$route",function(t,e){return function(o,n){n.bind("click",function(){n[0]&&n[0].href&&n[0].href===t.absUrl()&&e.reload()})}}]),app.directive("slideGraph",["$timeout",function(t){return{restrict:"A",scope:{voted:"@"},link:function(e,o){e.$watch("voted",function(e){function n(){t(function(){r=i.textContent.replace("%","")+"vh",s=u.textContent.replace("%","")+"vh",l.style.height=r,a.style.height=s},100),t(function(){i.classList.add("show-percentage"),u.classList.add("show-percentage")},1500),t(function(){c.classList.add("shake-rotate")},5e3)}var r,s,i=document.getElementById("result-1"),u=document.getElementById("result-2"),l=document.querySelector(".option-1"),a=document.querySelector(".option-2"),c=document.getElementById("next-button");e?n():o.on("click",function(){e&&n()})})}}}]),app.factory("pageFactory",function(){var t="YourCall.io";return{title:function(){return t},setTitle:function(e){t="Your Call: "+e}}}),angular.module("yourCall").factory("questionService",["$http",function(t){var e={};return e.getRandomQuestion=function(){return t.get("/api/random")},e.getAllQuestions=function(){},e.getReportedQuestions=function(){},e.deleteQuestion=function(){},e.createQuestion=function(){},e}]);